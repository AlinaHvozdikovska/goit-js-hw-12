{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(userInputValue, page = 1) {\n  const searchParams = new URLSearchParams({\n    key: '48339480-4f5c45a75f87f035650b36ee2',\n    q: userInputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  });\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response ? error.response.status : 'Network Error');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\n\nconst modalSimpleLiteBox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(image => {\n      return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${image.webformatURL}\"\n            alt=\"${image.tags}\"\n            />\n          </a>\n          <div class=\"stat-container\">\n            <div>\n                <span><b>Likes</b></span>\n                <span>${image.likes}</span>\n            </div>\n            <div>\n                <span><b>Views</b></span>\n                <span>${image.views}</span>\n            </div>\n             <div>\n                <span><b>Comments</b></span>\n                <span>${image.comments}</b></span>\n            </div>\n             <div>\n                <span><b>Downloads</b></span>\n                <span>${image.downloads}</span>\n            </div>\n          </div>\n        </li>\n    `;\n    })\n    .join('');\n  /* Додаємо нові зображення */\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  modalSimpleLiteBox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport { gallery } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nlet userInputValue = '';\n/* Змінна для сторінки яка зараз */\nlet currentPage = 1;\n/* Змінна для зберігання загальної кількості зображень */\nlet totalHits = 0;\n/* Кількість завантажених зображень */\nlet loadedImagesCount = 0;\n\nfunction showLoader() {\n  /*  Показуємо лоадер */\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  /* Ховаємо лоадер */\n  loader.style.display = 'none';\n}\n\nsearchForm.addEventListener('submit', async ev => {\n  ev.preventDefault();\n\n  gallery.innerHTML = '';\n  userInputValue = ev.target.elements.search.value.trim().toLowerCase();\n  /* Скидання сторінки при новому запиті */\n  currentPage = 1;\n  /* Скидання кількості завантажених зображень */\n  loadedImagesCount = 0;\n\n  if (userInputValue === '') {\n    iziToast.show({\n      message: 'Input field can not be empty. Please enter your message.',\n      messageColor: '#ffffff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  /* Відображаємо лоадер перед запитом */\n  showLoader();\n  /* Сховати кнопку перед новим запитом */\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    const images = await getImages(userInputValue, currentPage);\n    /* Отримуєм загальну кількість зображень */\n    totalHits = images.totalHits;\n\n    if (images.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: '#ffffff',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n    } else {\n      // Рендерим зображення при успішному запиті\n      renderGallery(images.hits);\n      /* Збільшуємо кількість завантажених зображень */\n      loadedImagesCount += images.hits.length;\n      /* показати кнопку після отримання зображення */\n      loadMoreBtn.style.display = 'block';\n      /*Збільшення сторінки для майбутніх запитів */\n      currentPage++;\n\n      /* Скролл сторінки на дві висоти карток галереї */\n      const cardHeight =\n        gallery.firstElementChild.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n\n      /* Перевірка чи це кінець колекції */\n      if (loadedImagesCount >= totalHits) {\n        /* Приховуємо кнопку */\n        loadMoreBtn.style.display = 'none';\n\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          messageColor: '#ffffff',\n          backgroundColor: '#ef4040',\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `${error}`,\n      messageColor: '#ffffff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n    /* Ховаємо лоадер після завершення запиту*/\n  } finally {\n    hideLoader();\n  }\n\n  searchForm.reset();\n});\n\n/* обробка натискання кнопки */\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader();\n\n  try {\n    const images = await getImages(userInputValue, currentPage);\n    if (images.hits.length > 0) {\n      /* Додавання нових зображень */\n      renderGallery(images.hits);\n      /* Збільшення кількості завантажених зображень */\n      loadedImagesCount += images.hits.length;\n      /*Збільшення сторінки для майбутніх запитів */\n      currentPage++;\n\n      /* Cкролл сторінки на дві висоти карток галереї */\n      const cardHeight =\n        gallery.firstElementChild.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n\n      /* Перевірка чи кінець колекції */\n      if (loadedImagesCount >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          messageColor: '#ef4040',\n          position: 'topRight',\n        });\n      }\n    } else {\n      /* Схована кнопка якщо більше немає зображень */\n      loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    iziToast.show({\n      message: `${error}`,\n      messageColor: '#ffffff',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["getImages","userInputValue","page","searchParams","axios","error","gallery","modalSimpleLiteBox","SimpleLightbox","renderGallery","images","markup","image","searchForm","loader","loadMoreBtn","currentPage","totalHits","loadedImagesCount","showLoader","hideLoader","ev","iziToast","cardHeight"],"mappings":"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"}